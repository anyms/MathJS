"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var u=e[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}var Fraction=function(){function e(t){_classCallCheck(this,e),this.checkNumber(t),this.value=t.toString()}return _createClass(e,[{key:"checkNumber",value:function(t){if(isNaN(t.toString())||""===t.toString().trim())throw"Error: '".concat(t,"' is not a number")}},{key:"toString",value:function(){return this.value.toString()}},{key:"toInt",value:function(){return parseInt(this.value)}},{key:"toFloat",value:function(){return parseFloat(this.value)}},{key:"toNumber",value:function(){return Number(this.value)}},{key:"int",value:function(){this.value=parseInt(this.value)}},{key:"float",value:function(){this.value=parseFloat(this.value)}},{key:"number",value:function(){this.value=Number(this.value)}},{key:"abs",value:function(){this.value=Math.abs(this.value)}},{key:"acos",value:function(){this.value=Math.acos(this.value)}},{key:"acosh",value:function(){this.value=Math.acosh(this.value)}},{key:"asin",value:function(){this.value=Math.asin(this.value)}},{key:"asinh",value:function(){this.value=Math.asinh(this.value)}},{key:"atan",value:function(){this.value=Math.atan(this.value)}},{key:"atanh",value:function(){this.value=Math.atanh(this.value)}},{key:"atan2",value:function(t){this.value=Math.atan2(this.value,t)}},{key:"cbrt",value:function(){this.value=Math.cbrt(this.value)}},{key:"ceil",value:function(){this.value=Math.ceil(this.value)}},{key:"clz32",value:function(){this.value=Math.clz32(this.value)}},{key:"cos",value:function(){this.value=Math.cos(this.value)}},{key:"cosh",value:function(){this.value=Math.cosh(this.value)}},{key:"exp",value:function(){this.value=Math.exp(this.value)}},{key:"expm1",value:function(){this.value=Math.expm1(this.value)}},{key:"floor",value:function(){this.value=Math.floor(this.value)}},{key:"fround",value:function(){this.value=Math.fround(this.value)}},{key:"hypot",value:function(){for(var t=[this.value],e=0;e<arguments.length;e++)t.push(arguments[e]);this.value=Math.hypot.apply(Math,t)}},{key:"imul",value:function(t){this.value=Math.imul(this.value,t)}},{key:"log",value:function(){this.value=Math.log(this.value)}},{key:"log1p",value:function(){this.value=Math.log1p(this.value)}},{key:"log10",value:function(){this.value=Math.log10(this.value)}},{key:"log2",value:function(){this.value=Math.log2(this.value)}},{key:"pow",value:function(t){this.value=Math.pow(this.value,t)}},{key:"sign",value:function(){this.value=Math.sign(this.value)}},{key:"sin",value:function(){this.value=Math.sin(this.value)}},{key:"sinh",value:function(){this.value=Math.sinh(this.value)}},{key:"sqrt",value:function(){this.value=Math.sqrt(this.value)}},{key:"tan",value:function(){this.value=Math.tan(this.value)}},{key:"tanh",value:function(){this.value=Math.tanh(this.value)}},{key:"trunc",value:function(){this.value=Math.trunc(this.value)}},{key:"toAlgebraic",value:function(t,e){if(t=t.toString(),e=e.toString(),-1===t.indexOf(".")&&-1===e.indexOf("."))return{num1:parseInt(t),num2:parseInt(e),base:1};-1===t.indexOf(".")?t+=".0":e+=".0";var a,u=Math.pow(10,t.split(".")[1].length),i=Math.pow(10,e.split(".")[1].length);return t=parseInt(t.replace(".","")),e=parseInt(e.replace(".","")),i<u?e*=(a=u)/i:t*=(a=i)/u,{num1:t,num2:e,base:a}}},{key:"add",value:function(t){this.checkNumber(t);var e=this.toAlgebraic(this.value,t);return this.value=String((e.num1+e.num2)/e.base),this}},{key:"divide",value:function(t){this.checkNumber(t);var e=this.toAlgebraic(this.value,t);return this.value=String(e.num1/e.num2),this}},{key:"divideAndReminder",value:function(t){this.checkNumber(t);var e=this.toAlgebraic(this.value,t);return this.divide(t),String(e.num1%e.num2/e.base)}},{key:"precision",value:function(t){return null==t?0:(this.checkNumber(t),this.value=String(Number(this.value).toPrecision(t)),this)}},{key:"round",value:function(t){return this.value=parseFloat(this.value),this.value=void 0===t?Math.round(this.value):Math.round(this.toFloat()*Math.pow(10,t))/Math.pow(10,t),this.value=String(this.value),this}},{key:"reminder",value:function(t){var e=this.toAlgebraic(this.value,t);return this.value=String(e.num1%e.num2/e.base),this}},{key:"subtract",value:function(t){this.checkNumber(t);var e=this.toAlgebraic(this.value,t);return this.value=String((e.num1-e.num2)/e.base),this}},{key:"multiply",value:function(t){this.checkNumber(t);var e=this.toAlgebraic(this.value,t);return this.value=String(e.num1*e.num2/(e.base*e.base)),this}}],[{key:"random",value:function(t,e){if(isNaN(t)&&isNaN(e))return Math.random();if(isNaN(e)?(e=parseInt(t),t=0):(t=parseInt(t),e=parseInt(e)),e<t)throw"Error: min value can not be greater than max value";return Math.floor(Math.random()*(e-t+1))+t}}]),e}();function fraction(t){return new Fraction(t)}Object.setPrototypeOf(Fraction,Math),"undefined"==typeof window&&(exports.Fraction=Fraction,exports.fraction=fraction);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyYWN0aW9uLmpzIl0sIm5hbWVzIjpbIkZyYWN0aW9uIiwibnVtIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNoZWNrTnVtYmVyIiwidmFsdWUiLCJ0b1N0cmluZyIsImlzTmFOIiwidHJpbSIsImNvbmNhdCIsInBhcnNlSW50IiwicGFyc2VGbG9hdCIsIk51bWJlciIsImFicyIsIk1hdGgiLCJhY29zIiwiYWNvc2giLCJhc2luIiwiYXNpbmgiLCJhdGFuIiwiYXRhbmgiLCJhdGFuMiIsImNicnQiLCJjZWlsIiwiY2x6MzIiLCJjb3MiLCJjb3NoIiwiZXhwIiwiZXhwbTEiLCJmbG9vciIsImZyb3VuZCIsImFyZ3MiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicHVzaCIsImh5cG90IiwiYXBwbHkiLCJpbXVsIiwibG9nIiwibG9nMXAiLCJsb2cxMCIsImxvZzIiLCJleHBvbmVudCIsInBvdyIsInNpZ24iLCJzaW4iLCJzaW5oIiwic3FydCIsInRhbiIsInRhbmgiLCJ0cnVuYyIsIm51bTEiLCJudW0yIiwiaW5kZXhPZiIsImJhc2UiLCJiYXNlTnVtIiwibnVtMUJhc2UiLCJzcGxpdCIsIm51bTJCYXNlIiwicmVwbGFjZSIsImFsZ2VicmFpYyIsInRvQWxnZWJyYWljIiwiU3RyaW5nIiwiZGl2aWRlIiwieCIsInVuZGVmaW5lZCIsInRvUHJlY2lzaW9uIiwiZGVjUG9zIiwicm91bmQiLCJ0b0Zsb2F0IiwiYWxnIiwibWluIiwibWF4IiwicmFuZG9tIiwiZnJhY3Rpb24iLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIndpbmRvdyIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJ1WkFBTUEsb0JBQ0YsU0FBQUEsRUFBWUMsR0FBS0MsZ0JBQUFDLEtBQUFILEdBQ2JHLEtBQUtDLFlBQVlILEdBQ2pCRSxLQUFLRSxNQUFRSixFQUFJSyxvRUFHVEwsR0FDUixHQUFJTSxNQUFNTixFQUFJSyxhQUF5QyxLQUExQkwsRUFBSUssV0FBV0UsT0FDeEMsS0FBQSxX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QWU3RSxTQWxKWGMsTUFHUCxvQkFBQWdFLFNBd0pBQyxRQUFRL0UsU0FBV0EsU0FDbkIrRSxRQUFRSixTQUFXQSIsImZpbGUiOiJmcmFjdGlvbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGcmFjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihudW0pIHtcclxuICAgICAgICB0aGlzLmNoZWNrTnVtYmVyKG51bSk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bS50b1N0cmluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrTnVtYmVyKG51bSkge1xyXG4gICAgICAgIGlmIChpc05hTihudW0udG9TdHJpbmcoKSkgfHwgbnVtLnRvU3RyaW5nKCkudHJpbSgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHRocm93IGBFcnJvcjogJyR7bnVtfScgaXMgbm90IGEgbnVtYmVyYDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLnZhbHVlLnRvU3RyaW5nKCk7IH1cclxuICAgIHRvSW50KCkgeyByZXR1cm4gcGFyc2VJbnQodGhpcy52YWx1ZSk7IH1cclxuICAgIHRvRmxvYXQoKSB7IHJldHVybiBwYXJzZUZsb2F0KHRoaXMudmFsdWUpOyB9XHJcbiAgICB0b051bWJlcigpIHsgcmV0dXJuIE51bWJlcih0aGlzLnZhbHVlKTsgfVxyXG4gICAgaW50KCkgeyB0aGlzLnZhbHVlID0gcGFyc2VJbnQodGhpcy52YWx1ZSk7IH1cclxuICAgIGZsb2F0KCkgeyB0aGlzLnZhbHVlID0gcGFyc2VGbG9hdCh0aGlzLnZhbHVlKTsgfVxyXG4gICAgbnVtYmVyKCkgeyB0aGlzLnZhbHVlID0gTnVtYmVyKHRoaXMudmFsdWUpOyB9XHJcblxyXG4gICAgLy8gUmV0dXJucyB0aGUgYWJzb2x1dGUgdmFsdWUgb2YgYSBudW1iZXIuXHJcbiAgICBhYnMoKSB7IHRoaXMudmFsdWUgPSBNYXRoLmFicyh0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgYXJjY29zaW5lIG9mIGEgbnVtYmVyLlxyXG4gICAgYWNvcygpIHsgdGhpcy52YWx1ZSA9IE1hdGguYWNvcyh0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgaHlwZXJib2xpYyBhcmNjb3NpbmUgb2YgYSBudW1iZXIuXHJcbiAgICBhY29zaCgpIHsgdGhpcy52YWx1ZSA9IE1hdGguYWNvc2godGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgdGhlIGFyY3NpbmUgb2YgYSBudW1iZXIuXHJcbiAgICBhc2luKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5hc2luKHRoaXMudmFsdWUpOyB9XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBoeXBlcmJvbGljIGFyY3NpbmUgb2YgYSBudW1iZXIuXHJcbiAgICBhc2luaCgpIHsgdGhpcy52YWx1ZSA9IE1hdGguYXNpbmgodGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgdGhlIGFyY3RhbmdlbnQgb2YgYSBudW1iZXIuXHJcbiAgICBhdGFuKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5hdGFuKHRoaXMudmFsdWUpOyB9XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBoeXBlcmJvbGljIGFyY3RhbmdlbnQgb2YgYSBudW1iZXIuXHJcbiAgICBhdGFuaCgpIHsgdGhpcy52YWx1ZSA9IE1hdGguYXRhbmgodGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgdGhlIGFyY3RhbmdlbnQgb2YgdGhlIHF1b3RpZW50IG9mIGl0cyBhcmd1bWVudHMuXHJcbiAgICBhdGFuMihudW0pIHsgdGhpcy52YWx1ZSA9IE1hdGguYXRhbjIodGhpcy52YWx1ZSwgbnVtKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgY3ViZSByb290IG9mIGEgbnVtYmVyLlxyXG4gICAgY2JydCgpIHsgdGhpcy52YWx1ZSA9IE1hdGguY2JydCh0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgc21hbGxlc3QgaW50ZWdlciBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYSBudW1iZXIuXHJcbiAgICBjZWlsKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5jZWlsKHRoaXMudmFsdWUpOyB9XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2YgbGVhZGluZyB6ZXJvZXMgb2YgYSAzMi1iaXQgaW50ZWdlci5cclxuICAgIGNsejMyKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5jbHozMih0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgY29zaW5lIG9mIGEgbnVtYmVyLlxyXG4gICAgY29zKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5jb3ModGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgdGhlIGh5cGVyYm9saWMgY29zaW5lIG9mIGEgbnVtYmVyLlxyXG4gICAgY29zaCgpIHsgdGhpcy52YWx1ZSA9IE1hdGguY29zaCh0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyBFeCwgd2hlcmUgeCBpcyB0aGUgYXJndW1lbnQsIGFuZCBFIGlzIEV1bGVyJ3MgY29uc3RhbnQgKDIuNzE4Li4uKSwgdGhlIGJhc2Ugb2YgdGhlIG5hdHVyYWwgbG9nYXJpdGhtLlxyXG4gICAgZXhwKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5leHAodGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgc3VidHJhY3RpbmcgMSBmcm9tIGV4cCh4KS5cclxuICAgIGV4cG0xKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5leHBtMSh0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgbGFyZ2VzdCBpbnRlZ2VyIGxlc3MgdGhhbiBvciBlcXVhbCB0byBhIG51bWJlci5cclxuICAgIGZsb29yKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5mbG9vcih0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgbmVhcmVzdCBzaW5nbGUgcHJlY2lzaW9uIGZsb2F0IHJlcHJlc2VudGF0aW9uIG9mIGEgbnVtYmVyLlxyXG4gICAgZnJvdW5kKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5mcm91bmQodGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgdGhlIHNxdWFyZSByb290IG9mIHRoZSBzdW0gb2Ygc3F1YXJlcyBvZiBpdHMgYXJndW1lbnRzLlxyXG4gICAgaHlwb3QoKSB7XHJcbiAgICAgICAgbGV0IGFyZ3MgPSBbdGhpcy52YWx1ZV07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmFsdWUgPSBNYXRoLmh5cG90KC4uLmFyZ3MpOyBcclxuICAgIH1cclxuICAgIC8vIFJldHVybnMgdGhlIHJlc3VsdCBvZiBhIDMyLWJpdCBpbnRlZ2VyIG11bHRpcGxpY2F0aW9uLlxyXG4gICAgaW11bChudW0pIHsgdGhpcy52YWx1ZSA9IE1hdGguaW11bCh0aGlzLnZhbHVlLCBudW0pOyB9XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBuYXR1cmFsIGxvZ2FyaXRobSAobG9nZSwgYWxzbyBsbikgb2YgYSBudW1iZXIuXHJcbiAgICBsb2coKSB7IHRoaXMudmFsdWUgPSBNYXRoLmxvZyh0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgbmF0dXJhbCBsb2dhcml0aG0gKGxvZ2UsIGFsc28gbG4pIG9mIDEgKyB4IGZvciBhIG51bWJlciB4LlxyXG4gICAgbG9nMXAoKSB7IHRoaXMudmFsdWUgPSBNYXRoLmxvZzFwKHRoaXMudmFsdWUpOyB9XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBiYXNlIDEwIGxvZ2FyaXRobSBvZiBhIG51bWJlci5cclxuICAgIGxvZzEwKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5sb2cxMCh0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgYmFzZSAyIGxvZ2FyaXRobSBvZiBhIG51bWJlci5cclxuICAgIGxvZzIoKSB7IHRoaXMudmFsdWUgPSBNYXRoLmxvZzIodGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgYmFzZSB0byB0aGUgZXhwb25lbnQgcG93ZXIsIHRoYXQgaXMsIGJhc2UgZXhwb25lbnQuXHJcbiAgICBwb3coZXhwb25lbnQpIHsgdGhpcy52YWx1ZSA9IE1hdGgucG93KHRoaXMudmFsdWUsIGV4cG9uZW50KTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgc2lnbiBvZiB0aGUgeCwgaW5kaWNhdGluZyB3aGV0aGVyIHggaXMgcG9zaXRpdmUsIG5lZ2F0aXZlIG9yIHplcm8uXHJcbiAgICBzaWduKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5zaWduKHRoaXMudmFsdWUpOyB9XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBzaW5lIG9mIGEgbnVtYmVyLlxyXG4gICAgc2luKCkgeyB0aGlzLnZhbHVlID0gTWF0aC5zaW4odGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgdGhlIGh5cGVyYm9saWMgc2luZSBvZiBhIG51bWJlci5cclxuICAgIHNpbmgoKSB7IHRoaXMudmFsdWUgPSBNYXRoLnNpbmgodGhpcy52YWx1ZSk7IH1cclxuICAgIC8vIFJldHVybnMgdGhlIHBvc2l0aXZlIHNxdWFyZSByb290IG9mIGEgbnVtYmVyLlxyXG4gICAgc3FydCgpIHsgdGhpcy52YWx1ZSA9IE1hdGguc3FydCh0aGlzLnZhbHVlKTsgfVxyXG4gICAgLy8gUmV0dXJucyB0aGUgdGFuZ2VudCBvZiBhIG51bWJlci5cclxuICAgIHRhbigpIHsgdGhpcy52YWx1ZSA9IE1hdGgudGFuKHRoaXMudmFsdWUpOyB9XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBoeXBlcmJvbGljIHRhbmdlbnQgb2YgYSBudW1iZXIuXHJcbiAgICB0YW5oKCkgeyB0aGlzLnZhbHVlID0gTWF0aC50YW5oKHRoaXMudmFsdWUpOyB9XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBpbnRlZ2VyIHBhcnQgb2YgdGhlIG51bWJlciB4LCByZW1vdmluZyBhbnkgZnJhY3Rpb25hbCBkaWdpdHMuXHJcbiAgICB0cnVuYygpIHsgdGhpcy52YWx1ZSA9IE1hdGgudHJ1bmModGhpcy52YWx1ZSk7IH1cclxuXHJcbiAgICAvKlxyXG4gICAgRm9sbG93aW5nIG1ldGhvZCBoYW5kbGVzIHRoZSBgYWxnZWJyYWljIGZyYWN0aW9uc2Agd2hpY2ggYWxsb3dzIHRvIGRvIGludGVnZXIgY2FsY3VsYXRpb24gb24gZmxvYXRpbmcgcG9pbnRzXHJcbiAgICAqL1xyXG4gICAgdG9BbGdlYnJhaWMobnVtMSwgbnVtMikge1xyXG4gICAgICAgIG51bTEgPSBudW0xLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbnVtMiA9IG51bTIudG9TdHJpbmcoKTtcclxuICAgICAgICBpZiAobnVtMS5pbmRleE9mKFwiLlwiKSA9PT0gLTEgJiYgbnVtMi5pbmRleE9mKFwiLlwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG51bTE6IHBhcnNlSW50KG51bTEpLFxyXG4gICAgICAgICAgICAgICAgbnVtMjogcGFyc2VJbnQobnVtMiksXHJcbiAgICAgICAgICAgICAgICBiYXNlOiAxXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAobnVtMS5pbmRleE9mKFwiLlwiKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgbnVtMSArPSBcIi4wXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbnVtMiArPSBcIi4wXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBudW0xQmFzZSA9IE1hdGgucG93KDEwLCBudW0xLnNwbGl0KFwiLlwiKVsxXS5sZW5ndGgpXHJcbiAgICAgICAgbGV0IG51bTJCYXNlID0gTWF0aC5wb3coMTAsIG51bTIuc3BsaXQoXCIuXCIpWzFdLmxlbmd0aClcclxuXHJcbiAgICAgICAgbnVtMSA9IHBhcnNlSW50KG51bTEucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG4gICAgICAgIG51bTIgPSBwYXJzZUludChudW0yLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcclxuXHJcbiAgICAgICAgbGV0IGRpZjtcclxuICAgICAgICBsZXQgYmFzZU51bTtcclxuXHJcbiAgICAgICAgaWYgKG51bTFCYXNlID4gbnVtMkJhc2UpIHtcclxuICAgICAgICAgICAgZGlmID0gbnVtMUJhc2UgLyBudW0yQmFzZTtcclxuICAgICAgICAgICAgYmFzZU51bSA9IG51bTFCYXNlO1xyXG4gICAgICAgICAgICBudW0yID0gbnVtMiAqIGRpZjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkaWYgPSBudW0yQmFzZSAvIG51bTFCYXNlO1xyXG4gICAgICAgICAgICBiYXNlTnVtID0gbnVtMkJhc2U7XHJcbiAgICAgICAgICAgIG51bTEgPSBudW0xICogZGlmO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbnVtMTogbnVtMSxcclxuICAgICAgICAgICAgbnVtMjogbnVtMixcclxuICAgICAgICAgICAgYmFzZTogYmFzZU51bVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBhZGQgdmFsdWVcclxuICAgIGFkZChudW0pIHtcclxuICAgICAgICB0aGlzLmNoZWNrTnVtYmVyKG51bSk7XHJcbiAgICAgICAgbGV0IGFsZ2VicmFpYyA9IHRoaXMudG9BbGdlYnJhaWModGhpcy52YWx1ZSwgbnVtKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gU3RyaW5nKFxyXG4gICAgICAgICAgICAoYWxnZWJyYWljLm51bTEgKyBhbGdlYnJhaWMubnVtMikgLyBhbGdlYnJhaWMuYmFzZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZGl2aWRlIHZhbHVlXHJcbiAgICBkaXZpZGUobnVtKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja051bWJlcihudW0pO1xyXG4gICAgICAgIGxldCBhbGdlYnJhaWMgPSB0aGlzLnRvQWxnZWJyYWljKHRoaXMudmFsdWUsIG51bSk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IFN0cmluZyhhbGdlYnJhaWMubnVtMSAvIGFsZ2VicmFpYy5udW0yKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBkaXZpZGUgdGhlIHZhbHVlIGFuZCByZXR1cm4gcmVtaW5kZXJcclxuICAgIGRpdmlkZUFuZFJlbWluZGVyKG51bSkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tOdW1iZXIobnVtKTtcclxuICAgICAgICBsZXQgYWxnZWJyYWljID0gdGhpcy50b0FsZ2VicmFpYyh0aGlzLnZhbHVlLCBudW0pO1xyXG4gICAgICAgIHRoaXMuZGl2aWRlKG51bSk7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZygoYWxnZWJyYWljLm51bTEgJSBhbGdlYnJhaWMubnVtMikgLyBhbGdlYnJhaWMuYmFzZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByZWNpc2lvbih4KSB7XHJcbiAgICAgICAgaWYgKHggPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja051bWJlcih4KTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gU3RyaW5nKE51bWJlcih0aGlzLnZhbHVlKS50b1ByZWNpc2lvbih4KSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcm91bmQoZGVjUG9zKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHBhcnNlRmxvYXQodGhpcy52YWx1ZSk7XHJcbiAgICAgICAgaWYgKGRlY1BvcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBNYXRoLnJvdW5kKHRoaXMudmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBNYXRoLnJvdW5kKHRoaXMudG9GbG9hdCgpICogTWF0aC5wb3coMTAsIGRlY1BvcykpIC8gTWF0aC5wb3coMTAsIGRlY1Bvcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmFsdWUgPSBTdHJpbmcodGhpcy52YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtaW5kZXIobnVtKSB7XHJcbiAgICAgICAgbGV0IGFsZ2VicmFpYyA9IHRoaXMudG9BbGdlYnJhaWModGhpcy52YWx1ZSwgbnVtKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gU3RyaW5nKChhbGdlYnJhaWMubnVtMSAlIGFsZ2VicmFpYy5udW0yKSAvIGFsZ2VicmFpYy5iYXNlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBzdWJ0cmFjdChudW0pIHtcclxuICAgICAgICB0aGlzLmNoZWNrTnVtYmVyKG51bSk7XHJcbiAgICAgICAgbGV0IGFsZ2VicmFpYyA9IHRoaXMudG9BbGdlYnJhaWModGhpcy52YWx1ZSwgbnVtKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gU3RyaW5nKChhbGdlYnJhaWMubnVtMSAtIGFsZ2VicmFpYy5udW0yKSAvIGFsZ2VicmFpYy5iYXNlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAgIFxyXG4gICAgbXVsdGlwbHkobnVtKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja051bWJlcihudW0pO1xyXG4gICAgICAgIGxldCBhbGcgPSB0aGlzLnRvQWxnZWJyYWljKHRoaXMudmFsdWUsIG51bSk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IFN0cmluZygoYWxnLm51bTEgKiBhbGcubnVtMikgLyAoYWxnLmJhc2UgKiBhbGcuYmFzZSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgcmFuZG9tKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgaWYgKGlzTmFOKG1pbikgJiYgaXNOYU4obWF4KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlzTmFOKG1heCkpIHtcclxuICAgICAgICAgICAgbWF4ID0gcGFyc2VJbnQobWluKTtcclxuICAgICAgICAgICAgbWluID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtaW4gPSBwYXJzZUludChtaW4pO1xyXG4gICAgICAgICAgICBtYXggPSBwYXJzZUludChtYXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1pbiA+IG1heCkge1xyXG4gICAgICAgICAgICB0aHJvdyBgRXJyb3I6IG1pbiB2YWx1ZSBjYW4gbm90IGJlIGdyZWF0ZXIgdGhhbiBtYXggdmFsdWVgO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxuICAgIH1cclxufVxyXG5cclxuT2JqZWN0LnNldFByb3RvdHlwZU9mKEZyYWN0aW9uLCBNYXRoKTtcclxuXHJcblxyXG5mdW5jdGlvbiBmcmFjdGlvbihudW0pIHtcclxuICAgIHJldHVybiBuZXcgRnJhY3Rpb24obnVtKTtcclxufVxyXG5cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgZXhwb3J0cy5GcmFjdGlvbiA9IEZyYWN0aW9uO1xyXG4gICAgZXhwb3J0cy5mcmFjdGlvbiA9IGZyYWN0aW9uO1xyXG59Il19
